- 良いテストとは変化しないように設計されるもの
- 複雑となった場合のコストがより大きい
- テストは自立している必要がある
- テストコードは完全にDRYになるのではなく、DAMPを目指すべきである
	- 「説明的かつ意味がわかりやすい言い回し（Descriptive And Meaningful Phrases）」
- テストの本体部分を離れること無く、全体を理解することが可能なテスト
- DAMPはDRYを置き換えるのではなく、テストを簡潔にし、補う
	- DRYなヘルパーメソッドとテストのインフラストラクチャーはテストを簡潔なものにする
	- テストの明確性を高める
	- テストを説明的で意味がわかりやすいものにすることを重視して行われるべき
		- 繰り返しを減らすという名目のみにおいて行われるべきでない

### 共有値

- 曖昧な名称の共有値を作る
	- テストを簡潔にかけるが、テストスイートが発展するにつれて問題が起こる
- ではどうするか？
	- テスト作者が関心のある値のみ作者が指定し、他の全ての値は妥当なデフォルト値を設定するヘルパーメソッドを用いる
		- 名前付き引数がある言語は簡単だが、ない場合はBuilderパターンを用いてエミュレートする
		- Laravelで言うFactory

### 初期設定の共有

- setUpのこと
- 適切に利用できれば、冗長で重要でない初期化ロジックの繰り返しを除去してテストをより明確かつ簡潔にできる
	- 不適切に利用されれば、重要な詳細を独立した初期化メソッド内に隠してしまいテストの完全性を損なう
- 最良のユースケース
	- テスト対象オブジェクトとその協調動作対象オブジェクト郡を構築する
- 初期設定のリスクは、テストが初期設定で使われる特定の値に依存するようになると、テストが不明確になりかねない

### ヘルパーメソッドと検証メソッドの共有

- ヘルパーメソッドの優良な利用方法は前述
- 類型は危険となる可能性がある
	- テスト対象システムに対してアサーションの共通セットを実行するメソッド
		- 挙動駆動である度合いが低くなる
		- 個々のテストがどれも意図の確定が難しくなる
	- しかし、より対象を絞った検証メソッドは依然として有用となりうる
		- 入力に対して**単一の概念的事実**が真であることを表明する
			- 検証している条件が、概念的に単純であるものの、テストメソッドの本体部分に含まれると明確性を低下させるであろうループ処理や条件分岐ロジックを実装に要する場合

### テストインフラストラクチャーを定義する

- 今までは単一のテストクラスかテストスイート内のメソッド間でのコード共有を対象として扱う
- 時には複数テストスイート間でのコード共有が有益となりうることもある
	- **テストインフラストラクチャー**と呼ぶ
	- インテグレーションテストかエンドツーエンドテスト内で比較的有益となる
	- **テストインフラストラクチャーはそれ自体のテストを常に備えてなければならない**
	- JUnitやPHPUnitなどのこと
