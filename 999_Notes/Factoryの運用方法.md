#php/laravel/test

Factoryはささっとデータを用意したい時に便利なんだけど、みんながみんな使う場所なので影響範囲がでかい。  
なのでここで要素を決めすぎると辛い時があるので、必須要素だけFactoryで定義すると良いのかも？  
Factoryでリレーションを作ってしまうのも考えられるけど、そうなるとモデルだけ使いたい時にも`RefreshDatabase`が必要になりそうなので避けるべきかなぁと感じています。

更に突き詰めて考えた結果
[[LaravelのFactoryベストプラクティス(仮)]]


- factoryのstateメソッドは細かい粒度で作る
	- stateメソッド同士をあわせて1つの条件を作るヘルパーを作る
		- これはModelFactoryかtestヘルパーとして作るかは悩みどころ
			- ModelFactory内でｲｲﾝｼﾞｬﾈ
	- stateメソッド内で外部参照がある場合は引数で取るようにしDI可能にする
		- 基本クラスはFactoryする
- 定義に書くもの
	- fakerで生成するもの
	- 複数状態があるものはランダムで生成
	- リレーションが適切に書かれていれば`hasBooks`のようにかける