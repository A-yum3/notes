## サブスクリプション

- リアルタイム更新をWebSocketを通じて行う

### サブスクリプションの利用

- リゾルバでDB追加後のPublishを行う

## セキュリティ

- 特に制限ないようにしておくと、クライアントがひとつのリクエストで巨大なクエリを発行し、サーバーを殺す

### リクエストタイムアウト

- 使用する時間の長さを制限する

### データの制限

- クエリで返せるデータ量を制限する
	- クエリリゾルバで引数をif文で上限を設定し、超えたら例外を投げる
	- リクエストできるレコード数が多い場合はデータのページング推奨

### クエリ深さの制限

- グラフなのでクエリが深くなればなるほど数は簡単に膨大になる
- クエリの深さを制限することによって、量を少なくする

### クエリの複雑さ制限

- リストの中のリストなど呼び出すと複雑化する

### Apollo Engine

- よく利用されているクエリを識別したり、パフォーマンス上のボトルネックを監視する

## 漸進的なマイグレーション

### RESTからリゾルバにデータをフェッチする

- GraphQLをゲートウェイとして利用し、リゾルバの中でサーバー上のデータを取得するリクエストを作成する
- クエリのレスポンスタイムを改善するために、サービスはRESTから送信されたデータをキャッシュしても良い

### もしくはGraphQLリクエストを使用する

- すべてを同時にGraphQLに切り替える必要はなく、部分的に使い始めるのもよい

### ひとつか２つのコンポーネントにGraphQLを組み込む

- サイト全体を作り直す代わりに、コンポーネントまたはページをひとつ選んでGraphQLでその特定の機能にデータを提供できるようにする

### 新しいRESTエンドポイントを作成しない

- RESTを拡張するのではなく、GraphQLエンドポイントを作成する

### 現在のRESTエンドポイントをメンテナンスしない

- GraphQLで書き換えるようにして、緩やかに移行していく

### スキーマファースト開発

- スキーマがあればモックを使用してコンポーネントの作成が行える

### コミュニティ

- Schema Stitching
	- 複数のGraphQL APIから単一のGraphQL スキーマを作成できる
- Prisma
	- 既存のデータベースをGraphQL APIに変えるツール
- AWS AppSync
	- スキーマを作成して、それからデータソースに接続できる