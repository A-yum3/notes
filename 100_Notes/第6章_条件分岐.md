### 条件分岐のネストによる可読性低下

#### 早期returnでネスト解消

- 仕様追加時にも対応しやすい

#### 見通しを悪くするelse句も早期returnで解決

- else句を使わずに早期returnで返すほうが読みやすい

### switch文の重複

#### 即座にswitch文を書いてしまう

- いろいろな場所にロジックが分散する
- 仕様変更時に修正が漏れる

#### 条件分岐を一箇所にまとめる

- 単一責任選択の原則
	- 同じ条件式の条件分岐を複数書かず、一箇所にまとめよう

#### よりスマートにswitch文重複を解消するinterface

- instanceof などで条件分岐が必要になるものに対してinterfaceを定め、呼び出せるようにする

#### interfaceをswitch文重複に応用（ストラテジパターン）

- **なんの仲間であるか**がinterface命名の決め手
- switchの代わりにMapで切り替える
- 未実装のメソッドをコンパイラが叱ってくれる
- 丁寧に値オブジェクト化する

### 条件分岐の重複とネスト

#### ポリシーパターンで条件を集約する

- 1つ1つのルールを表現するinterfaceを用意する
- ポリシークラスを用意する
- ルールをaddメソッドに集約し、随時登録ができるようにする

### 型チェックで分岐しないこと

- リスコフの置換原則
	- この原則は「基本型を継承型に置き換えても問題なく動作しなければならない」
- 原則に違反すると型判定の分岐コードが増大し、メンテナンスが難しいコードになる

### interfaceの使いこなしが中級者への第一歩

設計スキルごとの考え方の違い

|                | 初級者                     | 中級以上              |
| -------------- | -------------------------- | --------------------- |
| 分岐           | 迷わずif文やswitch文を使う | interface設計を試みる |
| 分岐ごとの処理 | ロジックをベタ書きする     | クラス化を試みる      |

 **分岐を書きそうになったら、まずinterface設計**を意識するだけで向き合い方が変わる

### フラグ引数

- フラグ引数付き目おｓっどは、何が起こるか読み手に想像を難しくさせる

#### メソッドを分離する

フラグ機能付きメソッドは、機能ごとに分離することで可読性を上げる

#### 切り替え機構をストラテジパターンで実現する

- 機能の切り替えにbooleanを使ってしまうと逆戻りになる
	- Mapで処理を切り替える