- ミュータブルとイミュータブル

### 再代入

- 変数に再度値を代入することを**再代入**、または**破壊的代入**

#### 不変にして再代入を防ぐ

- constやfinalで不変にする

#### 引数も不変にする

- 引数にもfinalで不変にする

### 可変がもたらす意図せぬ影響

- コードを変更したとき、思わぬ箇所で状態が変わり、予測と反する挙動になる

- 可変インスタンスの使いまわし
- 関数による可変インスタンスの操作

#### 副作用のデメリット

- 副作用
	- 関数が引数を受け取り、戻り値を返す以外に、外部の状態を変更すること

#### 関数の影響範囲を限定する

- 関数が次の項目を満たすことを前提に設計する
	- データ、つまり状態を引数で受け取る
	- 状態を変更しない
	- 値は関数の戻り値として返す

#### 不変にして予期せぬ動作を防ぐ

- 仕様変更時に意図せず副作用のある関数が作り込まれてしまい、予期しない動作を招いてしまうことがよくある

### 不変と可変の取り扱い方針

- 不変のメリット
	- 変数の意味が変化しなくなるので、混乱が抑えられる
	- 挙動が安定し、結果を予測しやすくなる
	- コードの影響範囲が限定的になり、保守が容易になる
- 間違った使い方ができない構造にするフールプルーフの立場

#### どんなときに可変にしてよいか

- パフォーマンスの要件が満たせないとき
- スコープが局所的なケース

#### 正しく状態変更するメソッドを設計

- 状態変更を発生させるメソッドを**ミューテーター**

#### コード外とのやりとりは局所化する

- リポジトリパターンなど
